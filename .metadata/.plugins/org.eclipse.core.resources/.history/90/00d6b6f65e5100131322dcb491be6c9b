package org.jmedikit.plugin.gui;

import org.eclipse.core.runtime.preferences.ConfigurationScope;
import org.eclipse.jface.preference.DirectoryFieldEditor;
import org.eclipse.jface.preference.FieldEditorPreferencePage;
import org.eclipse.jface.preference.PreferencePage;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Control;
import org.osgi.service.prefs.Preferences;


public class PlugInPreferences extends FieldEditorPreferencePage{

	DirectoryFieldEditor dir;
	
	public PlugInPreferences() {
		super("Field", GRID);
		setMessage("testmsg");
		setDescription("desc");
		
		Preferences preferences = ConfigurationScope.INSTANCE.getNode("org.jmedikit.plugin");
		Preferences node1 = preferences.node("node1");
		System.out.println(node1.get("h2", "default"));
	}



	@Override
	protected Control createContents(Composite parent) {
		Composite container = new Composite(parent, SWT.NONE);
		container.setLayout(new GridLayout(1, false));
		dir = new DirectoryFieldEditor("PATH", "PlugIn Verzeichnis", container);
		addField(dir);
		return parent;
	}



	@Override
	protected void createFieldEditors() {
		System.out.println("Test");
		addField(new DirectoryFieldEditor("PATH", "PlugIn Verzeichnis", getFieldEditorParent()));
	}

	@Override
	protected void performApply(){
		super.performApply();
		System.out.println(dir.getStringValue());
	}
}
