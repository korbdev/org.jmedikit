package org.jmedikit.lib.core;

import org.jmedikit.lib.image.AImage;

public abstract class PlugIn {

	public static final int OPTION_PROCESS_SINGLE = 1;
	
	public static final int OPTION_PROCESS_ALL = 2;
	
	private AImage processingImage;
	
	private int options;
	
	public abstract int options();
	
	public int initialize(){
		options = options();
		return options;
	}
	
	protected abstract AImage process(final AImage img);
	
	public AImage run(AImage img){
		processingImage = img;
		AImage result = process(processingImage);

		System.out.println(result.getInitializedOrientation()+", "+img.getInitializedOrientation());
		
		//Pruefung ob vom Benutzer Bildorientierung gesetzt wurde
		//wenn nicht, wird die Orientierung des Ursprungsbild auf das Ergebnisbild uebertragen
		if(!result.getInitializedOrientation()){
			System.out.println("COPY");
			result.copySignificantAttributes(img);
		}
		
		return result;
	}
}
