package org.jmedikit.lib.util;

import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.widgets.Event;
import org.jmedikit.lib.util.DicomCanvas;
import org.jmedikit.lib.util.Point2D;


public class MoveTool extends ATool{

	private Point2D<Integer> translation;
	
	public MoveTool(){
		super();
		translation = new Point2D<Integer>(0, 0);
	}
	
	public MoveTool(DicomCanvas canvas) {
		super(canvas);
		// TODO Auto-generated constructor stub
	}

	@Override
	public void actionMouseMove(Event e) {
		if(mouseDown){
			
			Point2D<Integer> translationOld = new Point2D<>(translation.x, translation.y);
			
			translation.x = actual.x - start.x;
			translation.y = actual.y - start.y;
			//System.out.println(translation.toString());
			canvas.imageCenter = new Point2D<Integer>(canvas.imageCenter.x+(translation.x - translationOld.x), canvas.imageCenter.y+(translation.y - translationOld.y));
		}
	}

	@Override
	public void actionMouseDown(Event e) {
		translation.x = 0;
		translation.y = 0;
	}

	@Override
	public void actionMouseUp(Event e) {

	}

	@Override
	public GC postCalculation(GC toDraw) {
		if(mouseDown){
			int rectWidth = (int) (canvas.imageDimension.width);
			int rectHeight = (int) (canvas.imageDimension.height);

			toDraw.drawRectangle(canvas.imageCenter.x-rectWidth/2, canvas.imageCenter.y - rectHeight/2, rectWidth, rectHeight);
			toDraw.setAlpha(50);
			toDraw.fillRectangle(canvas.imageCenter.x-rectWidth/2, canvas.imageCenter.y - rectHeight/2, rectWidth, rectHeight);
		}
		return toDraw;
	}

	

}
