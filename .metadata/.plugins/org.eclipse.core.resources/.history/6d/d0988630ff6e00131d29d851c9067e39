package org.jmedikit.lib.util;

import org.itk.simple.Image;
import org.itk.simple.PixelIDValueEnum;
import org.itk.simple.VectorUInt32;
import org.jmedikit.lib.image.AImage;

public class SimpleITKFactory {
	public static Image getITKImage(AImage img){
		switch (img.getImageType()) {
		case AImage.TYPE_BYTE_SIGNED:
			return produceITKImage(PixelIDValueEnum.sitkInt8, img);
		case AImage.TYPE_BYTE_UNSIGNED:
			return produceITKImage(PixelIDValueEnum.sitkUInt8, img);
		case AImage.TYPE_SHORT_SIGNED:
			return produceITKImage(PixelIDValueEnum.sitkInt16, img);
		case AImage.TYPE_SHORT_UNSIGNED:
			return produceITKImage(PixelIDValueEnum.sitkUInt16, img);
		case AImage.TYPE_INT_SIGNED:
			return produceITKImage(PixelIDValueEnum.sitkInt32, img);
		case AImage.TYPE_INT_UNSIGNED:
			return produceITKImage(PixelIDValueEnum.sitkUInt32, img);
		default:
			return null;
		}
	}
	
	private static Image produceITKImage(PixelIDValueEnum itkImageType, AImage img){
		int width = img.getWidth();
		int height = img.getHeight();
		
		Image itkImage = new Image(width, height, itkImageType);
		VectorUInt32 v = new VectorUInt32(2);
		
		for(int y = 0; y < height; y++){
			for(int x = 0; x < width; x++){
				v.set(0, x);
				v.set(1, y);
				itkImage.setPixelAsUInt16(v, img.getPixel(x, y));
			}
		}
		return itkImage;
	}
	
	private static AImage produceAImage(Image itkImage){
		return null;
	}
}
